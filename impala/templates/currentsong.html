{% extends "layout.html" %}
{% block body %}
    {{ super() }}
    <div class=currentsong>
    <p>
        {{ currentsong['artist'] }}
         - {{ currentsong['title'] }} -
        {{ currentsong['album'] }}
    </p>
    <p><span id=time-elapsed></span> / <span id=time-total></span></p>
    </div>
    <div class=controls>
        <button id=play type=button>Play</button>
        <button id=pause type=button>Pause</button>
    </div>
{% endblock %}
{% block script %}
    {{ super() }}
    <script>
        $( document ).ready(function() {
            $( '#play' ).click(function( event ) {
                $.get("{{ url_for('play') }}");
            });
            $( '#pause' ).click(function( event ) {
                $.get("{{ url_for('pause') }}");
            });
            (function get_currentsong_time() {
                $.ajax({
                    url: "{{ url_for('currentsong_time') }}",
                    dataType: 'json',
                    success: function(time) {
                        $('#time-elapsed').text(time.elapsed);
                        $('#time-total').text(time.total);
                        setTimeout(get_currentsong_time, 500);
                    },
                });
            })();
        });
    </script>
{% endblock %}
{% block debug %}
    {{ super() }}
    <table>
        <tr><th colspan=2 align=left>MPD currentsong</th></tr>
        {% for k in currentsong %}
        <tr><td class=key>{{ k }}</td><td>{{ currentsong[k] }}</td></tr>
        {% endfor %}
    </table>
{% endblock %}
